{% extends 'main.html' %}
{% load humanize %}

{% block dreamerslist %}
{#   <div class="container">#}
       <section id="grid" class="grid clearfix">
           <div id="simpleList" class="list-group">
               {% for desire in desire_list %}
                   <div class="grid-link list-group-item {% if forloop.counter|divisibleby:"2" %}even{% else %}odd{% endif %}" data-path-hover="m 0,0 0,47.7775 c 24.580441,3.12569 55.897012,-8.199417 90,-8.199417 34.10299,0 65.41956,11.325107 90,8.199417 L 180,0 z">
                       <figure>
                           {% if desire.desire_image %}
                               <img  src="{{ desire.desire_image }}"/>
                           {% else %}
                               <img  src="/static/img/new_year.png"/>
                           {% endif %}
                           <svg viewBox="0 0 180 320" preserveAspectRatio="none"><path d="m 0,0 0,171.14385 c 24.580441,15.47138 55.897012,24.75772 90,24.75772 34.10299,0 65.41956,-9.28634 90,-24.75772 L 180,0 0,0 z"/></svg>
                           <figcaption>
                               <h2 id="loopcounter-{{ forloop.counter }}-desire-{{ desire.id }}"><a href="{{ desire.link }}" {% if desire.link == "#" %}target="_self"{% else %}target="_blank"{% endif %}>{{ desire.title|safe }}</a></h2>
                               <p>{{ desire.text|safe }}</p>
                               <div class="visitor" id="owner-{{ is_owner }}-loggedin-{{ is_loggedin }}-choice-{{ is_choice }}-desire-{{ desire.id }}-state-{{ desire.desire_state }}">
                                   <button class="btn-info view" id="view-{{ desire.id }}">обновить</button>
                                   {% if is_loggedin %}
                                       <form action="{% url 'login_for_guest' %}" method="get">
                                           <input type="hidden" name="dreamer_id"  value={{ dreamer.id }}>
                                           <button type="submit" class="guest hidden" id="noname-{{ desire.id }}">Буду покупать</button>
                                       </form>
                                   {% endif %}
                                   {% if is_choice %}
                                       <form action="{% url 'selectdesire' %}" method="post">
                                           <input type="hidden" name="dreamer_id"  value={{ dreamer.id }}>
                                           <input type="hidden" name="desire_id"  value={{ desire.id }}>
                                           <input type="hidden" name="order_user_id"  value={{ user_id }}>
                                           <input type="hidden" name="order_user_name"  value={{ username }}>
                                           <input type="hidden" name="desire_desire_state"  value={{ desire.desire_state }}>
                                           <button class="guest hidden" id="desireselect-{{ desire.id }}">Буду покупать </button>
                                       </form>
                                   {% endif %}
                                   <form action="{% url 'backupdesire' %}" method="post">
                                       <input type="hidden" name="backupdesire"  value={{ desire.id }}>
                                       <input type="hidden" name="dreamer_id"  value={{ dreamer.id }}>
                                       <button type="submit" class="btn-info ar" id="ar-{{ desire.id }}">в архив</button>
                                   </form>
                               </div>
                           </figcaption>
                       </figure>
                   </div>
                   <div class="row list-group-item hidden" id="row-{{ desire.id }}">
                       <div class="desirestate-{{ desire.desire_state }} drs" id="desireinfo-{{ desire.id }}-desirecounter-{{ forloop.counter }}" style="">
                           <img src="{% if desire.desire_image %}{{  desire.desire_image }}{% else %}/static/img/new_year.png{% endif %}">
                           <div class="desire-form edt" id="desireform-{{ desire.id }}">
                               <form action="{% url 'editdesire' dreamer.id  desire.id %}" method="post">
                                   <input type="text" name="desire_title" maxlength="250" id="id_desire_title" style="width: 200px" value="{{ desire.title }}">
                                   <textarea id="id_desire_text_for_edit" name="desire_text" cols="157" rows="7">{{ desire.text_for_edit }}</textarea>
                                   <button type="submit" class="btn btn-info sv btn-sm" value="">Сохранить</button>
                               </form>
                           </div>
                           </div><hr class="dm">
                           {% if is_owner %}
{#                                            блок добавления ссылки на фото#}
                               <form class="form-inline link_foto" action="{% url 'linkfoto' dreamer_id %}" method="post">{% csrf_token %}
                                   <input type="text" class="form-control" id="add_link_foto" name="link"  placeholder="Введите ссылку">
                                   <input type="hidden" name="dreamer_id"  value={{ dreamer.id }}>
                                   <input type="hidden" name="desire_id"  value={{ desire.id }}>
                                   <button type="submit" class="btn btn-sm" style="margin-bottom: -3px">Добавить фото</button>
                               </form>
                           {% endif %}
                       </div>
               {% endfor %}
           </div>
       </section>
       {% if is_owner %}
{#  блок добавления желаний#}
           <div class="row" id="add_desire_block">
           <h2>Добавить новое желание:</h2>
               <form action="{% url 'adddesire' dreamer.id %}" class="button" method="post" >{% csrf_token %}
                   <p>
                       <input type="text" name="desire_title" maxlength="250" id="id_desire_title" style="width: 200px" placeholder="Введите краткое имя желания">
                   </p>
                   <p>
                       <textarea type="text" name="desire_text" cols="40" rows="10" required id="id_desire_text" placeholder="Дополнительные сведения о желании"></textarea>
                   </p>
                   <br>
                   <button type="submit" class="btn-sm btn-google" style="margin-right: 1px" value="">Добавить</button>
               </form>
           </div>
       {% endif %}
{#   </div>#}
{% endblock %}



