{% extends 'main.html' %}

{% block dreamerslist %}
    <div class="container">
        <h1>Desires by {{ dreamer.username }}:</h1>
        {% for desire in desire2 %}
            {{ desire.desire_state }}
            <div class="row">
                <div class="col-md-12 well desirestate-{{ desire.desire_state }}" id="desireinfo-{{ desire.id }}" style="">
                    <div class="date">{{ desire.date }}<br></div>
                    {{ desire.text|safe }}
                </div>
                <div class="col-md-12 well hidden desire-form" id="desireform-{{ desire.id }}">
                    <form action="{% url 'editdesire' dreamer.id  desire.id %}" method="post">
                        <textarea name="desire_text" cols="155" rows="7">{{ desire.text2 }}</textarea>
                        <button type="submit" class="btn btn-info glyphicon glyphicon-save" value=""></button>
                    </form>
                </div>
{#                редактирование желания#}
                <div class="col-md-2 {{ owner }}">
                    <button class="btn btn-info edit glyphicon glyphicon-edit" id="desirebutton-{{ desire.id }}"></button>
                </div>
{#                удаление желания#}
                <div class="col-md-2 {{ owner }}">{{ owner }}
                    <form action="{% url 'deldesire' dreamer.id %}" method="post">{% csrf_token %}
                        <input type="hidden" name="deldesire"  value={{ desire.id }}>
                        <button type="submit"  class="btn btn-danger glyphicon glyphicon-trash" value=""></button>
                    </form>
                </div>
{#                архивирование желания#}
                <div class="col-md-2 {{ owner }}">
                    <form action="{% url 'backupdesire' %}" method="post">
                        <input type="hidden" name="backupdesire"  value={{ desire.id }}>
                        <input type="hidden" name="dreamer_id"  value={{ dreamer.id }}>
                        <button type="submit"  class="btn btn-info glyphicon glyphicon-save-file" value=""> В архив</button>
                    </form>
                </div>
{#                авторизацияпри выборе желания для покупки#}
                    <div class="col-md-2 {{ guest }}">
                        <form action="{% url 'login1' %}" method="get">
                            <input type="hidden" name="dreamer_id"  value={{ dreamer.id }}>
                            <button type="submit"  class="btn btn-info login_new_user glyphicon glyphicon-check" value=""></button>
                        </form>
                    </div>
{#            выбор желания для покупки#}
                <div class="col-md-2 {{ choice }}">
                    <form action="{% url 'selectdesire' %}" method="post">
                        <input type="hidden" name="dreamer_id"  value={{ dreamer.id }}>
                        <input type="hidden" name="desire_id"  value={{ desire.id }}>
                        <input type="hidden" name="order_user_id"  value={{ user_id }}>
                        <input type="hidden" name="order_user_name"  value={{ username }}>
                        <input type="hidden" name="desire_desire_state"  value={{ desire.desire_state }}>
                        <button class="btn btn-info select_desire glyphicon glyphicon-check" id="desireselect-{{ desire.id }}">
                            Select desire</button>
                    </form>
                </div>
                <i class="glyphicon glyphicon-ok-circle {{ labelselect }}" id="labelselect-{{ desire.id }}" aria-hidden="true">
                    Selected by {{ desire.order_user_name }}</i>
            </div>
        {% endfor %}
{#    блок добавления желаний#}
        <div class="row">
            <form action="{% url 'adddesire' dreamer.id %}" class="button" method="post" >{% csrf_token %}
                <div class="col-md-12 well {{ owner }}">
                    {{ form.desire_text}}
                </div>
                <div class="col-md-2 {{ owner }}">
                    <button type="submit" class="btn btn-info glyphicon glyphicon-pencil" value=""></button>
                </div>
            </form>
        </div>
    </div>
{% endblock %}



