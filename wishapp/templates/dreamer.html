{% extends 'main.html' %}

{% block dreamerslist %}
    <div class="container">
        <h1>Desires by {{ dreamer.username }}:</h1>
        {% for desire in desire2 %}
            {% if username == dreamer.username %}
                <div class="row">
                    <div class="col-md-12 well desirestate-{{ desire.desire_state }}" id="desireinfo-{{ desire.id }}" style="">
                        <div class="date">{{ desire.date }}<br></div>
                        {{ desire.text|safe }}
                    </div>
                    <div class="col-md-12 well hidden desire-form" id="desireform-{{ desire.id }}">
                        <form action="{% url 'editdesire' dreamer.id  desire.id %}" method="post">
                            <textarea name="desire_text" cols="155" rows="7">{{ desire.text2 }}</textarea>
                            <button type="submit" class="btn btn-info glyphicon glyphicon-save" value=""></button>
                        </form>
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-info edit glyphicon glyphicon-edit" id="desirebutton-{{ desire.id }}"></button>
                    </div>
                    <div class="col-md-2">
                        <form action="{% url 'deldesire' dreamer.id %}" method="post">{% csrf_token %}
                            <input type="hidden" name="deldesire"  value={{ desire.id }}>
                            <button type="submit"  class="btn btn-danger glyphicon glyphicon-trash" value=""></button>
                        </form>
                    </div>
                </div>
            {% elif username == "" %}
                {% if desire.desire_state == 0 %}
                    <div class="row">
                        <div class="col-md-12 well desirestate-{{ desire.desire_state }}" id="desireinfo-{{ desire.id }}" style="">
                            <div class="date">{{ desire.date }}<br></div>
                            {{ desire.text|safe }}
                        </div>
                        <div class="col-md-2">
                            <form action="{% url 'login1' %}" method="get">
                                <input type="hidden" name="dreamer_id"  value={{ dreamer.id }}>
                                <button type="submit"  class="btn btn-info login_new_user glyphicon glyphicon-log-in" value=""></button>
                            </form>
                        </div>
                    </div>
                {% else %}
                    <div class="row">
                        <div class="col-md-12 well ordered" id="desireinfo-{{ desire.id }}" style="">
                            <div class="date">{{ desire.date }}<br></div>
                            {{ desire.text|safe }}
                        </div>
                        <div class="col-md-8">
                            <i class="glyphicon glyphicon-ok-circle select_desire labelselect" id="labelselect-{{ desire.id }}" aria-hidden="true">
                                Selected by {{ desire.order_user_name }}</i>
                        </div>
                    </div>
                {% endif %}
            {% else %}
                {% if desire.desire_state == 0 %}
                    <div class="row">
                        <div class="col-md-12 well desirestate-{{ desire.desire_state }}" id="desireinfo-{{ desire.id }}" style="">
                            <div class="date">{{ desire.date }}<br></div>
                                {{ desire.text|safe }}
                        </div>
                        <div class="col-md-2">
                            <form action="{% url 'selectdesire' %}" method="post">
                                <input type="hidden" name="dreamer_id"  value={{ dreamer.id }}>
                                <input type="hidden" name="desire_id"  value={{ desire.id }}>
                                <input type="hidden" name="order_user_id"  value={{ user_id }}>
                                <input type="hidden" name="order_user_name"  value={{ username }}>
                                <input type="hidden" name="desire_desire_state"  value={{ desire.desire_state }}>
                                <button class="btn btn-info select_desire glyphicon glyphicon-check" id="desireselect-{{ desire.id }}">
                                    Select desire</button>
                            </form>
                        </div>
                    </div>
                    <i class="glyphicon glyphicon-ok-circle hidden labelselect" id="labelselect-{{ desire.id }}" aria-hidden="true">
                        Selected by {{ username }}</i>
                {% else %}
                    <div class="row">
                        <div class="col-md-12 well ordered" id="desireinfo-{{ desire.id }}" style="">
                            <div class="date">{{ desire.date }}<br></div>
                                {{ desire.text|safe }}
                        </div>
                        <div class="col-md-8">
                            <i class="glyphicon glyphicon-ok-circle select_desire labelselect" id="labelselect-{{ desire.id }}" aria-hidden="true">
                                Selected by {{ desire.order_user_name }}</i>
                        </div>
                    </div>
                {% endif %}
            {% endif %}
        {% endfor %}
        {% if username == dreamer.username %}
            <div class="row">
                <form action="{% url 'adddesire' dreamer.id %}" class="button" method="post" >{% csrf_token %}
                    <div class="col-md-12 well">
                        {{ form.desire_text}}
                    </div>
                    <div class="col-md-2">
                        <button type="submit" class="btn btn-info glyphicon glyphicon-pencil" value=""></button>
                    </div>
                </form>
            </div>
        {% endif %}
    </div>

{% endblock %}



